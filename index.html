<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test connection speed</title>
</head>
<body>

    <h1>Test connection speed</h1>

    <script>
        const startTime = (new Date()).getTime();
        const downloadSize = 5767700;
        const download = new Image();
        download.src = "http://asterisk.jpbx.com.br/static/image-2023-6-6-3A326D36B89021CFE9EC.jpeg";
        download.onerror = (error) => console.log("Vc ta sem internet!", error);
        download.onload = () => {
            const endTime = (new Date()).getTime();
            const duration = (endTime - startTime) / 1000;
            const durationMs = (endTime - startTime);
            const bitsLoaded = downloadSize * 8;
            const speedBps = (bitsLoaded / duration).toFixed(2);
            const speedKbps = (speedBps / 1024).toFixed(2);
            const speedMbps = (speedKbps / 1024).toFixed(2);
            console.log("Your connection speed is: \n" +
                speedBps + " bps\n"   +
                speedKbps + " kbps\n" +
                speedMbps + " Mbps\n" +
                "ping " + duration + " s\n" +
                "ping " + durationMs + " ms");
        }
    </script>
</body>
</html>