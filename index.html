<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test connection speed</title>
</head>
<body>

    <h1>Test connection speed</h1>
    <p>Abra o console</p>

    <script>
        window.onload = function() {
            testConnectionSpeed()
            monitorSpeed()
        }

        function monitorSpeed(){
            setTimeout(() => {
                testConnectionSpeed();
                monitorSpeed();
            }, 5000)
        }
        function testConnectionSpeed() {
            const startTime = (new Date()).getTime();
            fetch("http://asterisk.jpbx.com.br/wip/login/ping")
                .then(() => {
                    const endTime = (new Date()).getTime();
                    const duration = (endTime - startTime) / 1000;
                    const durationMs = (endTime - startTime);

                    console.log("Sua latencia Ã©: \n" +
                        duration + " s\n" +
                        durationMs + " ms");
                })
                .catch(error => console.log("Vc ta sem internet!", error));
        }
    </script>
</body>
</html>